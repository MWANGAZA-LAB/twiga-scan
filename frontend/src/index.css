@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===================================
   RESPONSIVE DESIGN SYSTEM
   Mobile-First Approach with Progressive Enhancement
   =================================== */

@layer base {
  /* CSS Custom Properties for Dynamic Theming */
  :root {
    /* Spacing Scale (responsive) */
    --spacing-xs: clamp(0.25rem, 0.5vw, 0.5rem);
    --spacing-sm: clamp(0.5rem, 1vw, 1rem);
    --spacing-md: clamp(1rem, 2vw, 1.5rem);
    --spacing-lg: clamp(1.5rem, 3vw, 2.5rem);
    --spacing-xl: clamp(2rem, 4vw, 4rem);
    
    /* Font Sizes (fluid typography) */
    --font-xs: clamp(0.75rem, 0.7rem + 0.25vw, 0.875rem);
    --font-sm: clamp(0.875rem, 0.8rem + 0.35vw, 1rem);
    --font-base: clamp(1rem, 0.95rem + 0.5vw, 1.125rem);
    --font-lg: clamp(1.125rem, 1rem + 0.75vw, 1.5rem);
    --font-xl: clamp(1.5rem, 1.2rem + 1.5vw, 2.5rem);
    --font-2xl: clamp(2rem, 1.5rem + 2.5vw, 4rem);
    
    /* Touch Target Sizes (min 44px for accessibility) */
    --touch-target-min: 44px;
    --touch-target-comfortable: 48px;
    --touch-target-large: 56px;
    
    /* Breakpoint Hints (for JavaScript) */
    --breakpoint-sm: 640px;
    --breakpoint-md: 768px;
    --breakpoint-lg: 1024px;
    --breakpoint-xl: 1280px;
    --breakpoint-2xl: 1536px;
  }
  
  /* Safe Area Insets for Notched Devices */
  body {
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }
  
  /* Smooth Scrolling with Reduced Motion Support */
  html {
    scroll-behavior: smooth;
  }
  
  @media (prefers-reduced-motion: reduce) {
    html {
      scroll-behavior: auto;
    }
    
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
  
  /* Responsive Typography */
  body {
    font-size: var(--font-base);
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-size-adjust: 100%; /* Prevent auto-zoom on iOS */
  }
  
  /* Prevent Horizontal Overflow */
  html,
  body {
    overflow-x: hidden;
    width: 100%;
    max-width: 100vw;
  }
}

@layer components {
  /* Responsive Container Utilities */
  .container-responsive {
    width: 100%;
    margin-left: auto;
    margin-right: auto;
    padding-left: var(--spacing-md);
    padding-right: var(--spacing-md);
  }
  
  @media (min-width: 640px) {
    .container-responsive {
      max-width: 640px;
    }
  }
  
  @media (min-width: 768px) {
    .container-responsive {
      max-width: 768px;
      padding-left: var(--spacing-lg);
      padding-right: var(--spacing-lg);
    }
  }
  
  @media (min-width: 1024px) {
    .container-responsive {
      max-width: 1024px;
    }
  }
  
  @media (min-width: 1280px) {
    .container-responsive {
      max-width: 1280px;
    }
  }
  
  /* Touch-Friendly Button Base */
  .btn-touch {
    min-height: var(--touch-target-min);
    min-width: var(--touch-target-min);
    padding: 0.75rem 1.5rem;
    touch-action: manipulation; /* Prevents double-tap zoom */
    -webkit-tap-highlight-color: transparent;
  }
  
  /* Responsive Card */
  .card-responsive {
    padding: var(--spacing-md);
    border-radius: clamp(0.5rem, 1vw, 1rem);
  }
  
  @media (min-width: 768px) {
    .card-responsive {
      padding: var(--spacing-lg);
    }
  }
  
  /* Fluid Grid System */
  .grid-responsive {
    display: grid;
    gap: var(--spacing-md);
    grid-template-columns: repeat(auto-fit, minmax(min(100%, 280px), 1fr));
  }
}

@layer utilities {
  /* Responsive Spacing Utilities */
  .space-responsive-sm { padding: var(--spacing-sm); }
  .space-responsive-md { padding: var(--spacing-md); }
  .space-responsive-lg { padding: var(--spacing-lg); }
  .space-responsive-xl { padding: var(--spacing-xl); }
  
  /* Fluid Typography Utilities */
  .text-fluid-xs { font-size: var(--font-xs); }
  .text-fluid-sm { font-size: var(--font-sm); }
  .text-fluid-base { font-size: var(--font-base); }
  .text-fluid-lg { font-size: var(--font-lg); }
  .text-fluid-xl { font-size: var(--font-xl); }
  .text-fluid-2xl { font-size: var(--font-2xl); }
  
  /* Touch Target Utilities */
  .touch-target { min-height: var(--touch-target-min); min-width: var(--touch-target-min); }
  .touch-target-comfortable { min-height: var(--touch-target-comfortable); min-width: var(--touch-target-comfortable); }
  .touch-target-large { min-height: var(--touch-target-large); min-width: var(--touch-target-large); }
  
  /* Responsive Image */
  .img-responsive {
    max-width: 100%;
    height: auto;
    display: block;
  }
  
  /* Aspect Ratio Utilities */
  .aspect-square { aspect-ratio: 1 / 1; }
  .aspect-video { aspect-ratio: 16 / 9; }
  .aspect-portrait { aspect-ratio: 3 / 4; }
  
  /* Hide on Mobile/Desktop */
  @media (max-width: 767px) {
    .hide-mobile { display: none !important; }
  }
  
  @media (min-width: 768px) {
    .hide-desktop { display: none !important; }
  }
  
  /* Responsive Flex Direction */
  .flex-responsive {
    display: flex;
    flex-direction: column;
  }
  
  @media (min-width: 768px) {
    .flex-responsive {
      flex-direction: row;
    }
  }
  
  /* Safe Area Padding */
  .safe-top { padding-top: max(var(--spacing-md), env(safe-area-inset-top)); }
  .safe-bottom { padding-bottom: max(var(--spacing-md), env(safe-area-inset-bottom)); }
  .safe-left { padding-left: max(var(--spacing-md), env(safe-area-inset-left)); }
  .safe-right { padding-right: max(var(--spacing-md), env(safe-area-inset-right)); }
}

/* ===================================
   MEDIA QUERY BREAKPOINTS
   Mobile: < 640px
   Tablet: 640px - 1024px
   Desktop: 1024px - 1280px
   Large Desktop: > 1280px
   =================================== */

/* Mobile-Specific Optimizations */
@media (max-width: 639px) {
  /* Reduce motion on mobile to save battery */
  * {
    transition-duration: 150ms !important;
  }
  
  /* Optimize font rendering on small screens */
  body {
    -webkit-text-size-adjust: none;
    text-rendering: optimizeSpeed;
  }
}

/* Tablet Optimizations */
@media (min-width: 640px) and (max-width: 1023px) {
  /* Optimize for landscape and portrait tablet modes */
  @media (orientation: portrait) {
    .tablet-portrait-full {
      width: 100%;
    }
  }
  
  @media (orientation: landscape) {
    .tablet-landscape-split {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--spacing-lg);
    }
  }
}

/* Desktop Optimizations */
@media (min-width: 1024px) {
  /* Enable hover states only on devices with hover capability */
  @media (hover: hover) and (pointer: fine) {
    .hover-scale:hover {
      transform: scale(1.02);
      transition: transform 0.2s ease;
    }
  }
}

/* Print Styles */
@media print {
  body {
    background: white;
    color: black;
  }
  
  .no-print,
  button,
  .btn-touch {
    display: none !important;
  }
}

/* ===================================
   ANIMATIONS & TRANSITIONS
   =================================== */

@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes slideInFromBottom {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

.animate-fadeIn {
  animation: fadeIn 0.3s ease-out forwards;
}

.animate-slideIn {
  animation: slideInFromBottom 0.4s ease-out forwards;
}

.animate-pulse {
  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* Performance Optimization: Hardware Acceleration */
.will-change-transform {
  will-change: transform;
}

.will-change-opacity {
  will-change: opacity;
}

/* GPU-accelerated transforms */
.gpu-accelerated {
  transform: translateZ(0);
  backface-visibility: hidden;
  perspective: 1000px;
}
